#include "Serializer.hpp"
#include <iostream>

static void print_planet(void)
{
std::cout
<< "............................................................                                         \n"
<< "........................::::::::::.:.........................          ***+=--:.                     \n"
<< "....................::::::::::::::::::.......................    @@@@@@@%#+=-::....                  \n"
<< "..................::::::::::::::::::::::.....................@@@@@@@@@@@%#==--::::.....              \n"
<< " ...............::::::::----------::::::::.................@@@@@@@@@@@@%++==---::::.......           \n"
<< "...............::::::----========----::::-:.....=........@@@@@@@@@@@@%#**+===---::::.......          \n"
<< ".............:::*::---===++****++===--::::::...........@@@@@@@@@@@@@@**+===--=:-:::::.......      .  \n"
<< ".............:::::---==+*#%@@@@%#*+==---::::..+.......@@@@@@@@@@@@@#%#*+====--:::-::::.......        \n"
<< "............::::::--==+*%@@@@@@@@%*+==--:::::.......*@@@@@@@@@@@@@%#+++===-------::::.......         \n"
<< "............:::::---=+*#@@@@@@@@@@#*+=---:::::......@@@@@@@@@@@@@@%**+====----:::::::......          \n"
<< "............:::::---=+*#@@@@@@@@@@#*+=---:::::.....@@@@@@@@@@@@@@@%*+=+==-----:::::.....             \n"
<< ".............%::::--==+*#@@@@@@@@#*+==--::::.:....@@@@@@@@@@@@@@@@%*++====--::::.:.....              \n"
<< "......:......:::::---==+**#%%%%#**+==---::::.:....@@@@@@@@@@@@@@%@#**++==---:::::.....               \n"
<< "..............:::::----==++++++++==---::::::.....*@@@@@@@@@@@@@%*##*+====---::::......               \n"
<< "...+...........::::::-----======-----::::::......@@@@@@@@@@@@@@@%#+=+===--:::.:.......               \n"
<< "...............-::::::::----------::::::::.......@@@@@@@@@@@@@#@#***+--=---:.:.......                \n"
<< "..................::::::::::::::::::::::.........@@@@@@@@@@@@%%*=+===---::::.........                \n"
<< " ................:..::::::::::::::::::............@@@@@@@@%@##**++==----:::..........                \n"
<< "  ......................::::::::::................@@@@@@@%#*++-------::.:...........                 \n"
<< "   ...............:.....:..........................@@@@@@@##++-:-::-::::........... .               :\n"
<< " .  ...............................................@@@@@@%#%*+=::--::::::::..........                \n"
<< "      ..............................:............   @@@@@@#***=-::::::::::-..:::.:......             \n"
<< "         .......................................     %@@@@@#*+=---:::::::...:::::::........          \n"
<< "            .................................          @@@@@@%*+=-------:::::::::::::.....           \n"
<< "         .     ...........................              #@@@%%*=====-----::::::::........            \n"
<< "      .             ........... .....                     *#**+=--------:::::::::....                \n"
<< "                                          =     *            +=--::::::::::::.......                 \n"
<< "                                                                : ....::::::.......                  \n"
  << std::endl;
  }

int main() {
  Data data;
  data.planetName = "Kepler-452b";
  data.distance = 1800;

  uintptr_t raw = Serializer::serialize(&data);
  Data *ptr = Serializer::deserialize(raw);

  std::cout << "Original : " << &data << std::endl;
  std::cout << "Serialized: " << raw << std::endl;
  std::cout << "Restored  : " << ptr << std::endl;

  std::cout << "Name: " << ptr->planetName
            << ", Distance (ly): " << ptr->distance << std::endl;
  print_planet();
}
